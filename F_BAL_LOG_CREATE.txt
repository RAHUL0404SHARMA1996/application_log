  method F_BAL_LOG_CREATE.

DATA: LS_LOG  TYPE BAL_S_LOG,
    LS_PROT TYPE BALLOGHNDL.

  CLEAR: LS_LOG, LS_PROT, GT_PROT[].

  LS_LOG = VALUE #( OBJECT = ZCL_CONSTANT=>GC_OBJECT
                    SUBOBJECT = ZCL_CONSTANT=>GC_SUB_OBJECT
                     EXTNUMBER = GV_EXTNUMBER ).

  CALL FUNCTION 'BAL_LOG_CREATE'
    EXPORTING
      I_S_LOG                 = LS_LOG
    IMPORTING
      E_LOG_HANDLE            = LS_PROT
    EXCEPTIONS
      LOG_HEADER_INCONSISTENT = 1
      OTHERS                  = 2.
  IF NOT SY-SUBRC IS INITIAL.
    MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
            WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
  ELSE.
    APPEND LS_PROT TO GT_PROT.
  ENDIF.

  endmethod.